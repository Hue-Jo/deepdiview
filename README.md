# 영화에 대한 심도 있는 토론을 원한다면? Deepdiview! 
> TMDB의 오픈API를 활용하여 넷플릭스(kr)에서 제공하는 영화정보를 검색하고, 영화에 대한 다양한 의견을 나눌 수 있는 서비스.
## 매주 투표를 통해 '이 주의 영화'를 선정한 후, 인증을 거쳐 특정 영화에 대한 깊이있는 의견을 나눌 수 있는 서비스입니다. 

-----
## 사용 기술 스택
- 언어 : Java (JDK 17)
- 프레임워크 : SpringBoot 3.4
- DB : MySQL, Redis
- 파일 저장 : AWS S3
- ORM : Spring Data JPA
- 보안 : Spring Security, JWT (jjwt 0.12)
- 실시간 통신 : SSE
- 배포 환경 : AWS EC2, Github Actions (CI/CD)
- API 문서화 : Swagger

### 사용 오픈 API
- TMDB https://api.themoviedb.org/3/discover/movie?include_adult=true&include_video=false&language=ko&sort_by=primary_release_date.desc&watch_region=KR&with_watch_providers=8

---
## 프로젝트 목적 
- 단순한 영화 리뷰를 넘어, 실제로 영화를 감상한 인증된 사용자들의 리뷰(토론)를 따로 제공하여 리뷰의 깊이감과 신뢰성을 높일 수 있도록 함
- 투표와 인증, 리뷰(토론)을 통해 영화에 대해 사용자들이 적극적으로 상호작용할 수 있도록 함 

---
  
## 프로젝트 설명 
### 1. 사용자
일반 사용자(USER), 관리자(ADMIN)
- JWT를 이용하여 로그인 후 인증된 사용자만 특정 기능을 사용 가능
- 로그인 시, 엑세스 토큰과 리프레시 토큰 생성
### 2. TMDB API를 활용한 영화정보 제공
-  매주 월요일 0시마다 영화 데이터 자동 업데이트
   -  더이상 넷플릭스에서 제공하지 않는 영화의 경우, DB에서 사라지지 않고 상태가 변경됨 
- 영화 제목으로 영화 상세정보 조회
  - 특정 단어로 영화 검색 가능 
  - 띄어쓰기 무시 가능  
### 3. 영화 투표
매주 인기도 탑5의 영화를 대상으로 투표 진행
- 생성
  - 관리자 권한
  - 일요일에만 생성 가능
- 참여
  - 한 주(월-토)에 한 번만 참여 가능
  - 하나의 영화에만 투표 가능
  - 투표 후 결과를 바로 확인 가능
- 동일 득표수로 1위를 가릴 수 없다면 마지막에 득표한 영화가 상위 랭크 차지 
### 4. 영화감상 인증
지난주의 투표에서 1위를 한 영화를 본 인증샷을 업로드하여 감상 여부 확인.
- 관리자는 업로드된 사진을 확인한 후 인증 승인/거절(사유포함)
- 이미 승인을 받은 경우, 중복 인증 불가
- 승인을 받은 사용자만 해당 영화에 대한 토론에 참여 가능
- 월요일마다 상태 초기화 스케줄링

### 5. 리뷰/댓글
- 리뷰(일반) : 특정 영화에 대해 한 번만 작성 가능
- 댓글 : 특정 리뷰에 대해 여러 댓글 작성 가능
### 6. 좋아요
- 특정 리뷰에 대해 한 번만 가능
  - 두 번 누를 시 취소
### 7. 토론
- 토론 게시판 = 인증 승인을 받은 사용자(실제로 영화를 본 사용자)만 작성할 수 있는 게시판 
- 인증하기 전에 작성했던 리뷰가 있는 경우
  - 이전의 리뷰는 삭제되고, 인증받은 후의 리뷰만 저장됨
- 인증받은 사용자가 작성한 리뷰의 경우, '인증된 리뷰' 표시가 붙음 
### 8. 알림
- 종류 
  - 리뷰에 댓글이 달릴 때
  - 리뷰에 좋아요가 눌릴 때
  - 인증 상태가 변경될 때
- 본인의 행동에 대해서는 알림이 가지 않음
  - 타인에 의해서만 알림 작동
